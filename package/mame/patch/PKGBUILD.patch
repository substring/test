diff --git a/mame/trunk/PKGBUILD b/mame/trunk/PKGBUILD
index 0a8780d52b1..42ab3bd637e 100644
--- a/mame/trunk/PKGBUILD
+++ b/mame/trunk/PKGBUILD
@@ -3,46 +3,53 @@
 # Contributor: robb_force <robb_force@holybuffalo.net>
 # Contributor: JJDaNiMoTh <jjdanimoth@gmail.com>
 
-pkgname=mame
+pkgname=groovymame
 pkgver=0.208
+_mamever=${pkgver/./}
 pkgrel=1
-pkgdesc="A port of the popular Multiple Arcade Machine Emulator using SDL with OpenGL support."
+pkgdesc="A CRT oriented of the popular MAME emulator"
 url="https://mamedev.org/"
 license=(GPL2)
 arch=(x86_64)
-depends=(sdl2_ttf qt5-base lua libutf8proc pugixml portmidi portaudio)
+depends=(sdl2_ttf qt5-base lua libutf8proc pugixml portmidi portaudio libxrandr)
 makedepends=(nasm python asio rapidjson glm libxinerama)
 conflicts=(sdlmame)
 replaces=(sdlmame)
-source=("https://github.com/mamedev/mame/archive/mame${pkgver/./}.tar.gz" mame.sh)
+source=("https://github.com/mamedev/mame/archive/mame${_mamever}.tar.gz" mame.sh 0207_groovymame_017n.diff)
 sha256sums=('d02dba8e144ac11878226ef48aa8e4d30a33d77dd72210f84e9803908c70e8b2'
-            'da37e17b53759f049234af393bc69c29e1e4aab58df44a9384e7f7160a49db29')
+            'da37e17b53759f049234af393bc69c29e1e4aab58df44a9384e7f7160a49db29'
+            'cd1937e551ea34141a0720fcc0bef4531d195bdae37ab4f5e9c5386ba98cd62b')
 
 
 prepare() {
-  cd mame-mame${pkgver/./}
+  cd mame-mame${_mamever}
 
 # Use system libraries
+  msg2 "Use system libraries..."
   sed -e 's|\# USE_SYSTEM_LIB|USE_SYSTEM_LIB|g' -i makefile
+  # Apply GroovyMAME patch
+  msg2 "Apply groovymame patch..."
+  patch -p0 --binary -i "${srcdir}/0207_groovymame_017n.diff"
 }
 
 build() {
-  cd mame-mame${pkgver/./}
+  cd mame-mame${_mamever}
-  make \
+  CCACHE_CPP2=yes make OVERRIDE_CC="ccache gcc" OVERRIDE_CXX="ccache g++" \
     NOWERROR=1 \
     OPTIMIZE=2 \
     TOOLS=1 \
-    ARCHOPTS=-flifetime-dse=1
+    PTR64=1 NOASM=0\
+    ARCHOPTS=-flifetime-dse=1 TARGET=mame SUBTARGET=arcade
 }
 
 package() {
-  cd mame-mame${pkgver/./}
+  cd mame-mame${_mamever}
 
-  # Install the mame script
-  install -Dm755 "$srcdir"/$pkgname.sh "$pkgdir"/usr/bin/$pkgname
+  # Install the mame script. Don't use $pkgname, groovymame.sh doesn't exist
+  install -Dm755 "$srcdir"/mame.sh "$pkgdir"/usr/bin/mame
 
   # Install the binaries
-  install -Dm755 mame64 "$pkgdir"/usr/lib/mame/mame
+  install -Dm755 mametiny64 "$pkgdir"/usr/lib/mame/mame
   for _i in castool chdman imgtool jedutil nltool nlwav pngcmp regrep romcmp src2html \
             split srcclean ldverify ldresample; do
     install -m755 $_i -t "$pkgdir"/usr/lib/mame
@@ -50,8 +57,8 @@ package() {
   done
 
   # Install the extra bits
-  install -Dm644 src/osd/modules/opengl/shader/glsl*.*h -t "$pkgdir"/usr/lib/$pkgname/shader/
-  cp -ar {artwork,bgfx,plugins,language,ctrlr,keymaps,hash} "$pkgdir"/usr/lib/$pkgname/
+  install -Dm644 src/osd/modules/opengl/shader/glsl*.*h -t "$pkgdir"/usr/lib/mame/shader/
+  cp -ar {artwork,bgfx,plugins,language,ctrlr,keymaps,hash} "$pkgdir"/usr/lib/mame/
 
   # Include the license
   install -Dm644 docs/LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
@@ -64,8 +71,8 @@ package() {
 
   # documentation
   install -dm0755 "$pkgdir"/usr/share/doc
-  cp -a docs "$pkgdir"/usr/share/doc/$pkgname
-  rm -r "$pkgdir"/usr/share/doc/$pkgname/man
+  cp -a docs "$pkgdir"/usr/share/doc/mame
+  rm -r "$pkgdir"/usr/share/doc/mame/man
   install -d "$pkgdir"/usr/share/man/man{1,6}
   install -m644 docs/man/*.1* "$pkgdir"/usr/share/man/man1/
   install -m644 docs/man/*.6* "$pkgdir"/usr/share/man/man6/
